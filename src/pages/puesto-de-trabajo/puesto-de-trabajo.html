<ion-header>
  <ion-navbar color="primary" text-center>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>
      <h2>{{rolUsuario.areaNombre}}</h2>
      <h3>{{rolUsuario.puestoNombre}}</h3>
    </ion-title>
  </ion-navbar>
</ion-header>

<ion-content>
  <ion-grid>
    <ion-row>
      <ion-col col-4 text-center>
        <ion-card>
          <ion-card-header>
            {{cantidadEmpleados}}
          </ion-card-header>
          <ion-card-content>
            <span style="font-size: 0.7em;">Cantidad Empleados</span>
          </ion-card-content>
        </ion-card>
      </ion-col>
      <ion-col col-4 text-center>
        <ion-card>
          <ion-card-header>
            {{diasSinAccidentes  | date:"dd"}} días
          </ion-card-header>
          <ion-card-content>
            <span style="font-size: 0.7em;">Sin accidentes</span>
          </ion-card-content>
        </ion-card>
      </ion-col>
      <ion-col col-4 text-center>
        <ion-card>
          <ion-card-header>
            {{cantCapacitaciones}}
          </ion-card-header>
          <ion-card-content>
            <span style="font-size: 0.5em;" text-center>capacitaciones realizadas</span>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
  <ion-card>
    <ion-card-header text-center>
      Novedades sin atender
    </ion-card-header>
    <canvas id="chart"></canvas>
  </ion-card>

<!-- -->
<ion-card >
  <ion-card-header text-center>
    Capacitaciones recientes
  </ion-card-header>
  <div *ngFor = "let capacitacion of infoCapacitaciones; let i = index">
    <div *ngIf = "i < 3 ">
      <ion-card (click)="cargarCapacitacion (capacitacion)">
        <ion-item>
          <h2 text-wrap>{{capacitacion.nombre}}</h2>
          <p style="font-size: 0.7em;">{{capacitacion.fechaCreacion | date:"dd MMMM yyyy"}}</p>
        </ion-item>
        <ion-row>
          <ion-col center text-center>
            <ion-note>
              <b>10</b> capacitados
            </ion-note>
          </ion-col>
        </ion-row>
      </ion-card>
    </div>
  </div>
  <div text-center *ngIf = "cantCapacitaciones > 3">
    <u (click)="mostrarListaCapacitaciones()"><a>Mostrar más</a></u>
    <br>
  </div>
</ion-card>

<!-- -->


<ion-card>
  <ion-card-header text-center>
    Equipos presentes
  </ion-card-header>
  <div *ngFor="let equipo of equiposProteccion; let i = index">
    <div *ngIf="i<3">
  <ion-card (click)="cargarEquipo(equipo)">
    <ion-item >
      <h2 text-wrap>{{ equipo.nombre }}</h2>
      <p style="font-size: 0.7em;">Cantidad = {{ equipo.cantidad }}</p>
    </ion-item>
  </ion-card>
</div>
</div>
  <div text-center (click)="mostrarListaEquipos()" *ngIf = "cantidadEquiposProteccion > 3" >
  <u><a>Mostrar más</a></u>
  <br>
</div>

</ion-card>

<!--Lista de accidentados-->

<ion-card>
  <ion-card-header text-center>
    Accidentes Recientes
  </ion-card-header>
<div *ngFor="let accidente of detallesAccidentes; let i = index">
  <div *ngIf="i<3" >
  <ion-card (click)="cargarAccidentes(accidente)" >
    <ion-item>
      <h2 text-wrap>{{accidente.nombre}}</h2>
      <p style="font-size: 0.7em;">{{accidente.fecha | date:"dd MMMM yyyy"}}</p>
    </ion-item>
    <ion-row>
      <ion-col center text-center>
        <ion-note style="margin-right:30px ">
          <b>{{accidente.heridos}}</b> heridos
        </ion-note>
        <ion-note >
          <b>{{accidente.muertos}}</b> muertos
        </ion-note>
      </ion-col>
    </ion-row>
  </ion-card>
  </div>
</div>

  <div text-center (click)="mostrarListaAccidentes()"  *ngIf = "cantidadDeAccidentes > 3" >
    <u><a >Mostrar más</a></u>
    <br>
  </div>
</ion-card>

<!-- -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular-i18n/1.4.6/angular-locale_es-es.js"></script>
</ion-content>
